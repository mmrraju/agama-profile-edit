Flow org.gluu.agama.profile.edit
     Basepath ""
// Profile edit flow starting
Log "@info Profile edit flow starting..."
// Create  variable for UI feedback
uiFeedback = {}
emailObj = {}
// Iterate x times max
Repeat 6 times max
     // Retrieve user mail  from UI
     userInput = RRF "mail.ftlh" emailObj
     // create an instance of user profile update service
     userProfileUpdateService = Call org.gluu.agama.jans.UserProfileUpdate#getInstance 
     // Check user already exist or not with mail
     user | E = Call userProfileUpdateService getUserEntity userInput.mail
     // If user found
     When user.empty is not true
     Otherwise
          // User not found
          mailObj.errorMessage = "User not found"
// Maximum attempt reached
Log "@info Maximum attempt reached"